!function(t){function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}var e={};n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(n){return t[n]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},n.p="./",n(n.s=0)}([function(){function t(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var e=[],o=!0,i=!1,r=void 0;try{for(var c,l=t[Symbol.iterator]();!(o=(c=l.next()).done)&&(e.push(c.value),!n||e.length!==n);o=!0);}catch(t){i=!0,r=t}finally{try{o||null==l.return||l.return()}finally{if(i)throw r}}return e}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function n(t,n){return Math.floor(Math.random()*(n-t+1)+t)}var e=document.getElementById("background-canvas"),o=e.getContext("2d");o.fillStyle="white",o.fillRect(0,0,e.width,e.height);var i,r="R",c=!1,l=20,u=!1,f=[],a={T:function(t){return 0>t.y-l?{x:t.x,y:e.height-l,direction:"T"}:{x:t.x,y:t.y-l,direction:"T"}},D:function(t){return t.y+l>=e.height?{x:t.x,y:0,direction:"D"}:{x:t.x,y:t.y+l,direction:"D"}},R:function(t){return t.x+l>=e.width?{x:0,y:t.y,direction:"R"}:{x:t.x+l,y:t.y,direction:"R"}},L:function(t){return 0>t.x-l?{x:e.width-l,y:t.y,direction:"L"}:{x:t.x-l,y:t.y,direction:"L"}}},y=[{blockPositions:[{x:0,y:0},{x:20,y:0},{x:40,y:0},{x:60,y:0}],direction:"R"}],s=function(){var t=20*n(0,29),e=20*n(0,29);f=[t,e]},d=function(){i=setInterval((function(){x(),h(r),b(),c=!1}),1e3/14)};s(),d();var x=function(){var t=y[0].blockPositions.length-1,n=y[0].blockPositions[t];n.x===f[0]&&n.y===f[1]&&(s(),v())},b=function(){o.fillStyle="white",o.fillRect(0,0,e.width,e.height),o.fillStyle="red",o.fillRect(f[0],f[1],20,20),y.forEach((function(t){t.blockPositions.forEach((function(t){o.fillStyle="blue",o.fillRect(t.x,t.y,20,20)}))}))},h=function(n){var o=y[0].blockPositions.length-1,i=y[0].blockPositions[o];y[0].direction!==n&&(y.unshift({blockPositions:[i],requiredCoord:{x:i.x,y:i.y},direction:n}),y[1].blockPositions.splice(o,1)),y.forEach((function(n,i){var r=y.length-1;n.blockPositions.forEach((function(n,c){if(0!==i){var l=y[i-1],u=y[i],f=l.requiredCoord,s=f.x,d=f.y;if(n.x===s&&n.y===d){var x=a[l.direction](n);y[i-1].blockPositions.unshift(x),y[i].blockPositions.splice(c,1),i===r&&0===y[i].blockPositions.length&&y.splice(i,1)}else{var b=a[u.direction](n);y[i].blockPositions[c]=b}}else{var h=y[0],v=a[h.direction](n);if(y[i].blockPositions[c]=v,c===o){var p=t(e.getContext("2d").getImageData(v.x,v.y,1,1).data,3),g=p[0],k=p[1],P=p[2];0===g&&0===k&&255===P&&alert("you lost")}}}))}))},v=function(){var t=y.length-1,n=y[t],e=n.direction,o=n.blockPositions[0],i=o.x,r=o.y,c=a[e](o),l=c.x,u=c.y;y[t].blockPositions.unshift({x:i+(i-l),y:r+(r-u)})};document.onkeydown=function(t){"Escape"===t.key&&(u?(u=!1,d()):(clearInterval(i),u=!0)),c||("38"==t.keyCode?("D"!=r&&(r="T"),c=!0):"40"==t.keyCode?("T"!=r&&(r="D"),c=!0):"37"==t.keyCode?("R"!=r&&(r="L"),c=!0):"39"==t.keyCode&&("L"!=r&&(r="R"),c=!0))}}]);
//# sourceMappingURL=app.js.map